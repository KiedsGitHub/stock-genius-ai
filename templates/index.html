<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StockGeniusAI</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='circle.ico') }}">
    <style>
        body {
            background-color: #8AB5FE;
            color: #2d3748;
            padding: 20px;
            font-family: 'Roboto', sans-serif;
            animation: fadeIn 1s ease-in-out;
        }

        .card {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transform: translateY(20px);
            opacity: 0;
            animation: slideIn 0.5s forwards;
        }

        .card-header {
            background-color: #f7fafc;
            border-bottom: none;
            color: #2d3748;
            border-radius: 12px 12px 0 0;
            padding: 24px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .form-control {
            background-color: #edf2f7;
            color: #2d3748;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 12px;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .form-control:focus {
            background-color: #e2e8f0;
            border-color: #cbd5e0;
        }

        .btn-primary {
            background-color: #467EDF;
            border: none;
            border-radius: 6px;
            padding: 12px 32px;
            margin: 8px;
            color: #ffffff;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
            font-size: 1rem;
        }

        .btn-primary:hover {
            background-color: #0055C7;
            transform: scale(1.05);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            animation: fadeIn 1s ease-in-out;
        }

        th, td {
            padding: 12px;
            border: 1px solid #e2e8f0;
            text-align: left;
        }

        th {
            background-color: #f7fafc;
            font-weight: 600;
        }

        .footer {
            font-style: italic;
            color: #4a5568;
            text-align: center;
            margin-top: 24px;
            animation: fadeIn 2s ease-in-out;
        }

        .fab {
            position: fixed;
            width: 56px;
            height: 56px;
            bottom: 20px;
            right: 20px;
            background-color: #467EDF;
            color: white;
            border-radius: 50%;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            font-size: 24px;
            line-height: 56px;
            cursor: pointer;
            z-index: 1000;
            transition: transform 0.3s, background-color 0.3s;
        }

        .fab:hover {
            transform: rotate(90deg);
            background-color: #0055C7;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1050;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-dialog {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            width: 500px;
            max-width: 90%;
        }

        .modal-header {
            background-color: #f7fafc;
            border-bottom: 1px solid #e2e8f0;
            padding: 16px;
            text-align: center;
            font-size: 1.25rem;
            font-weight: 700;
        }

        .modal-body {
            padding: 20px;
            font-size: 1rem;
        }

        .modal-footer {
            text-align: right;
            padding: 16px;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes slideIn {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>

    <div class="container mx-auto">
        <div class="card shadow-lg">
            <div class="card-header">
                <h1>StockGeniusAI</h1>
            </div>
            <div class="card-body p-6">
                <form action="/predict" method="post" class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                    <input type="text" name="ticker" placeholder="Enter stock ticker" class="form-control" required>
                    <input type="number" name="future_days" placeholder="Days to predict" class="form-control" min="1">
                    <input type="submit" value="Predict" class="btn-primary">
                </form>

                {% if error %}
                <p class="error">{{ error }}</p>
                {% endif %}

                {% if data %}
                <div class="result">
                    <div id="plot"></div>
                    <br>
                    <h2>Best Buy Date: {{ data.best_buy_date }} at Price: {{ data.best_buy_price }}</h2>
                    <h2>Best Sell Date: {{ data.best_sell_date }} at Price: {{ data.best_sell_price }}</h2>
                    <script>
                        var plotData = {{ data.plot1|safe }};
                        Plotly.newPlot('plot', plotData.data, plotData.layout);
                    </script>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="fab" onclick="toggleMenu()">+</div>

    <div id="infoModal" class="modal">
    <div class="modal-dialog">
        <div class="modal-header">
            <h5 id="modalTitle">Information</h5>
        </div>
        <div class="modal-body" id="modalBody">
            <p><b>THIS MODEL IS ONLY TRAINED TO PREDICT STOCK PRICES FOR THIS SET OF STOCK TICKERS.</b> <br><br>
                <h4><b>Can predict stock for : </b></h4>
                Apple Inc, Microsoft, Google, Amazon, Meta, Starbucks, McDonald's, China Petroleum, CVS Health, Visa, MasterCard, Adobe<br><br>
                <h4><b>Stock Ticker Available: </b></h4>
                AAPL, MSFT, GOOGL, AMZN, META, SBUX, MCD, 600028.SS, CVS, V, MA, ADBE</p>

        </div>
        <div class="modal-footer">
            <button type="button" class="btn-primary" onclick="closeModal()">Close</button>
        </div>
        </div>
    </div>


    <div id="fab-menu" style="display: none;">
        <div class="fixed inset-0 flex justify-center items-end p-6">
            <div class="bg-white rounded-lg shadow-xl w-full max-w-sm">
                <ul class="divide-y divide-gray-200">
                    <li class="p-4 cursor-pointer hover:bg-gray-100" onclick="openModal('about')">About Machine Learning</li>
                    <li class="p-4 cursor-pointer hover:bg-gray-100" onclick="openModal('information')">Information</li>
                    <li class="p-4 cursor-pointer hover:bg-gray-100" onclick="openModal('contact')">Contact Us</li>
                </ul>
            </div>
        </div>
    </div>


    <script>
        function toggleMenu() {
            $('#fab-menu').toggle();
        }

        function emailUs() {
            window.location.href = "mailto:irfanperibadi25@gmail.com";
        }

        function callUs() {
            window.location.href = "tel:+601173478097";
        }

        function openModal(type) {
            let title = '';
            let body = '';
            switch (type) {
                case 'about':
                    title = 'About Forecast Engine';
                    body = '<h2>What is the function of this tool?</h2><p>This is a subset of artificial intelligence (AI) that focuses on using historical data from Yahoo Finance to predict stock market movements. This Machine Learning model is trained to forecast whether stock prices will rise or fall the next day, helping determine optimal dates for buying or selling stocks.</p>';
                    break;

                case 'information':
                    title = 'Information';
                    body = '<p><b>THIS MODEL IS ONLY TRAINED TO PREDICT STOCK PRICES FOR THIS SET OF STOCK TICKERS.</b> <br><br>' +
                    '<h4><b>Can predict stock for : </b></h4>' +
                    'Apple Inc, Microsoft, Google, Amazon, Meta, Starbucks, McDonald\'s, China Petroleum, CVS Health, Visa, MasterCard, Adobe<br><br>' +
                    '<h4><b>Stock Ticker Available: </b></h4>' +
                    'AAPL, MSFT, GOOGL, AMZN, META, SBUX, MCD, 600028.SS, CVS, V, MA, ADBE</p>';
                    break;

                case 'contact':
                    title = 'Contact Us';
                    body = '<button class="btn-primary mb-2" onclick="emailUs()">Email Us</button><button class="btn-primary" onclick="callUs()">Call Us</button>';
                    break;
            }
            $('#modalTitle').text(title);
            $('#modalBody').html(body);
            $('#infoModal').show();
        }

        function closeModal() {
            $('#infoModal').hide();
        }
    </script>

    <div class="footer">
        Developed by: <br> 1. MUHAMMAD ADAM IRFAN BIN SARBINI<br> 2. MOHD ZAIDIL ADHA BIN MAT HUSSIN <br> 3. TAN RHU CHOON
    </div>

</body>

</html>
